import React from "react"
import useFetch from 'hooks/useFetch'


const FollowUser = ({isFollowed, userSlug}) => {

    const apiUrl = `/profiles/${userSlug}/follow`
    const [{response}, doFetch] = useFetch(apiUrl)
    const isFollowedWithResponse = response ? response.profile.following : isFollowed
    const followStatus = isFollowedWithResponse ? 'UnFollow' : 'Follow'

    const handleFollow = event => {
        event.preventDefault()
        doFetch({
            method: isFollowedWithResponse ? 'delete' : 'post'
        })
    }


    return (
        <button className="btn btn-sm action-btn btn-secondary" onClick={handleFollow}>
            <i className="ion-plus-round"></i>
            <span>&nbsp; {followStatus} {userSlug}</span>
        </button>
    )

}

export default FollowUser