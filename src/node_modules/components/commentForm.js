import React, {useEffect, useState} from "react"
import BackendErrorMessages from 'components/backendErrorMessages'


const CommentForm = ({onSubmit, errors, initialValues}) => {
    const [body, setBody] = useState('')
    const [img, setImg] = useState('')


    const handleSubmit = event => {
        event.preventDefault()
        const comment = {
            body: body
        }
        onSubmit(comment)
    }

    useEffect(() => {
        if (!initialValues) {
            return
        }

        setBody(initialValues.body)
        setImg(initialValues.img)

    }, [initialValues])

    return (

        <div className="row">
            <div className="col-xs-12 col-md-8 offset-md-2">
                {errors && <BackendErrorMessages backendErrors={errors}/>}
                <form className="card comment-form ng-untouched ng-pristine ng-valid" onSubmit={handleSubmit}>
                    <fieldset>
                        <fieldset className="card-block">
                            <textarea
                                className="form-control ng-pristine ng-valid ng-touched"
                                rows="3"
                                placeholder="Write a comment..."
                                value={body}
                                onChange={e=>setBody(e.target.value)}
                            ></textarea>
                        </fieldset>

                        <fieldset className="card-footer">
                            <img src={img} alt="" />
                            <button
                                type="submit"
                                className="btn btn-sm btn-primary"
                            >
                                Post Comment
                            </button>
                        </fieldset>
                    </fieldset>
                </form>
            </div>
        </div>
    )
}

export default CommentForm

